# 03부. 더 심층적인 통찰력을 향한 리팩터링

## Introduction

- 가장 어려운 일은 도메인 전문가의 섬세한 관심사를 포착하고 효과적인 설계를 이끌어줄 명확한 모델을 발견하는 것
- 궁극적으로, 도메인에 대한 심층적인 이해를 반영한 모델이 필요
- 유용한 모델을 성공적으로 개발하기 위해 명심해야 할 세 가지 관건
  - 정교한 도메인 모델을 만들 수 있으며, 노력을 들일 만한 가치가 있다.
  - 해당 도메인을 학습하는 개발자와 도메인 전문가의 긴밀한 참여와 반복적인 리팩터링 과정 없이 유용한 모델을 개발하기란 쉽지 않다.
  - 유용한 모델을 효과적으로 구현하고 사용하려면 정교한 설계 기술이 필요할지도 모른다.

## 리팩터링 수준

- 리팩터링이란 소프트웨어의 기능을 수정하지 않고 설계를 다시 하는 것
- 자동화된 단위 테스트 스위트가 구비돼 있다면 비교적 안전하게 리팩터링을 수행할 수 있다.
- 그러나 리팩터링을 다루는 대부분의 문헌에서는 매우 상세한 수준에서 코드의 가독성을 높이거나 쉽게 개선하는 기계적인 변경에 초점을 맞춘다.
- 리팩터링의 목표는 개발자가 단순히 코드가 수행하는 바를 이해하는 것뿐만 아니라 왜 그렇게 수행되는지를 이해하고 도메인 전문가와의 의사소통에 이를 연관시키는 것

## 심층 모델

- 심층 모델(deep model)이란 도메인의 피상적인 측면은 배제하고 도메인 전문가의 주요 관심사와 가장 적절한 지식을 알기 쉽게 표현하는 모델이다.
- 이 정의가 추상화를 의미하는 것은 아니다.
- 도메인과 조화를 이루는 모델에서는 융통성, 단순함, 설명력을 얻을 수 있다.
- 그러한 모델이 공통적으로 지나고 있는 한 가지 특정은 업무 전문가가 즐겨 쓰는 단순하지만 충분히 추상적인 언어가 존재한다는 것

## 심층 모델/유연한 설계

- 한 가지 다행인 점은 도메인에 대해 새롭게 알게 된 내용을 반영하도록 지속적으로 모델과 코드를 변경하는 실제 행위 자체로 말미암아 여러 부분에 중복될 수 있는 공통적인 부분을 손쉽게 처리하는 동시에 변경이 필요한 적절한 지점에 유연성을 제공할 수 있다는 것
- 유연한 설계는 변경을 촉진할뿐 아니라 모델 자체의 개선에도 기여한다.

## 발견 과정

- 모델과 설계 간의 관계가 매우 밀접하므로 코드가 리팩터링하기 어려운 경우 더는 모델링을 진행할 수가 없다.
- 발견한 개념을 훌륭하게 모델링하기 위해 보통 창조성과 시행착오에 의존하겠지만 종종 누군가가 쉽게 적용할 수 있는 패턴을 만들어 놓은 경우도 있다.
